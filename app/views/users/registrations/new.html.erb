<% content_for(:html_title) { 'Elephant - Gerenciamento Para Psicologia Clínica | Registro' } %>
<div class="vh100">
  <%= render 'shared/public-navbar-login' %>
  <section id="cadastro" class="el fill">
    <div class="row m-0 p-0 h-100">
      <div id="cadastro-left-side" class="d-flex flex-column col m-0 pl-0 left">
        <div id="cabecalho" class="row m-0 p-0 d-flex justify-content-start flex-column">
          <h1 class="six">O controle completo da sua clínica</h1>
          <h3 class="six">Texto auxiliar texto auxiliar</h3>
        </div>

        <div id="cadastro-features-container"
          class="flex-column align-items-center d-flex m-0 flex-grow-to-remaing-size">
          <div class="row m-0 p-0 wd-100">
            <div class="col feature-item d-flex flex-column align-items-center justify-content-center">
              <i class="fas fa-hand-holding-usd"></i>
              <h6 class="my-3 wd-100">
                Funcionalidade 1
              </h6>
              <span class="description wd-100 text-center">
                Texto descritivo
              </span>
            </div>

            <div class="col feature-item d-flex flex-column align-items-center justify-content-center">
              <i class="fas fa-clock"></i>
              <h6 class="my-3  wd-100">
                Funcionalidade 1
              </h6>
              <span class="description wd-100 text-center">
                Texto descritivo
              </span>
            </div>
          </div>

          <div class="row mt-5 m-0 p-0 wd-100">
            <div class="col feature-item d-flex flex-column align-items-center justify-content-center">
              <i class="fas fa-mobile-alt"></i>
              <h6 class="my-3  wd-100">
                Funcionalidade 1
              </h6>
              <span class="description wd-100 text-center">
                Texto descritivo
              </span>
            </div>

            <div class="col feature-item d-flex flex-column align-items-center justify-content-center">
              <i class="fas fa-lightbulb"></i>
              <h6 class="my-3  wd-100">
                Funcionalidade 1
              </h6>
              <span class="description wd-100 text-center">
                Texto descritivo
              </span>
            </div>
          </div>
        </div>


      </div>
      <div id="cadastro-right-side" class="col m-0 right pr-0">
        <div id="steps" class="bounding">
          <h1 class="bold">
            Registrar-se
          </h1>
          <div id="steps-indicator" class="my-5 form-steps d-flex align-items-center justify-content-between">
            <div data-step='1' class="item step active">
              <div class="indicator">1</div>
              <div class="description">
                Info<span class="d-lg-none d-inline">. </span><span class="d-lg-inline d-none">rmações</span><br>
                pessoais
              </div>
            </div>
            <span class="divider"></span>
            <div data-step='2' class="item step">
              <div class="indicator">2</div>
              <div class="description">
                <span>
                  Info<span class="d-lg-none d-inline">. </span><span class="d-lg-inline d-none">rmações</span> de<br>
                  autent<span class="d-lg-none d-inline">. </span><span class="d-lg-inline d-none">icação</span>
                </span>

              </div>
            </div>
            <span class="divider"></span>
            <div data-step='3' class="item step">
              <div class="indicator">3</div>
              <div class="description">
                Info<span class="d-lg-none d-inline">. </span><span class="d-lg-inline d-none">rmações</span>
                de<br>logradouro
              </div>
            </div>
          </div>
          <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { 'data-step': 'true' }) do |f| %>
          <div data-step-content="1" class="step-content visible">
            <div class="form-row">
              <div class="form-group col">
                <%= f.label :first_name, for: 'first_name' %>
                <%= f.text_field :first_name, class: "form-control #{ 'is-invalid' if resource.errors[:first_name].any? }", id: 'first_name'%>
                <% if resource.errors[:first_name].any? %>
                <div class="invalid-feedback">
                  <% resource.errors[:first_name].each do |m| %>
                  <%= m %>
                  <br>
                  <% end %>
                </div>
                <% end %>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group col">
                <%= f.label :last_name, for: 'last_name' %>
                <%= f.text_field :last_name, class: "form-control #{ 'is-invalid' if resource.errors[:last_name].any? }", id: 'last_name'%>
                <% if resource.errors[:last_name].any? %>
                <div class="invalid-feedback">
                  <% resource.errors[:last_name].each do |m| %>
                  <%= m %>
                  <br>
                  <% end %>
                </div>
                <% end %>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group col">
                <%= f.label :phone, for: 'phone' %>
                <%= f.text_field :phone, class: "form-control telefone #{ 'is-invalid' if resource.errors[:phone].any? }", id: 'phone'%>
                <% if resource.errors[:phone].any? %>
                <div class="invalid-feedback">
                  <% resource.errors[:phone].each do |m| %>
                  <%= m %>
                  <br>
                  <% end %>
                </div>
                <% end %>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group col">
                <%= f.label :document_number, for: 'document_number' %>
                <%= f.text_field :document_number, class: "form-control cpf #{ 'is-invalid' if resource.errors[:document_number].any? }", id: 'document_number'%>
                <% if resource.errors[:document_number].any? %>
                <div class="invalid-feedback">
                  <% resource.errors[:document_number].each do |m| %>
                  <%= m %>
                  <br>
                  <% end %>
                </div>
                <% end %>
              </div>
            </div>
          </div>

          <div data-step-content="2" class="step-content">
            <div class="form-row">
              <div class="form-group col">
                <%= f.label :email, for: 'email' %>
                <%= f.email_field :email, class: "form-control #{ 'is-invalid' if resource.errors[:email].any? }", id: 'email', autocomplete: "email"%>
                <% if resource.errors[:email].any? %>
                <div class="invalid-feedback">
                  <% resource.errors[:email].each do |m| %>
                  <%= m %>
                  <br>
                  <% end %>
                </div>
                <% end %>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group col">
                <%= f.label :password, for: 'password'%>
                <% if @minimum_password_length %>
                <em><%= t('devise.shared.minimum_password_length', count: @minimum_password_length) %></em>
                <% end %><br />
                <%= f.password_field :password, class: "form-control #{ 'is-invalid' if resource.errors[:password].any? }", id: 'password' %>
                <% if resource.errors[:password].any? %>
                <div class="invalid-feedback">
                  <% resource.errors[:password].each do |m| %>
                  <%= m %>
                  <br>
                  <% end %>
                </div>
                <% end %>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group col">
                <%= f.label :password_confirmation, for: 'password_confirmation'%>
                <%= f.password_field :password_confirmation, class: "form-control #{ 'is-invalid' if resource.errors[:password_confirmation].any? }", id: 'password_confirmation' %>
                <% if resource.errors[:password_confirmation].any? %>
                <div class="invalid-feedback">
                  <% resource.errors[:password_confirmation].each do |m| %>
                  <%= m %>
                  <br>
                  <% end %>
                </div>
                <% end %>
              </div>
            </div>
          </div>

          <div data-step-content="3" class="step-content">
            <%= f.fields_for :addresses do |addr_form| %>
            <div class="form-row">
              <div class="form-group col">
                <label for="uf">UF</label>
                <%= addr_form.select :uf, [], { include_blank: false }, { id: 'uf', class: "form-control #{ 'is-invalid' if resource.errors['addresses.uf'].any? }" } %>
                <% if resource.errors["addresses.uf"].any? %>
                <div class="invalid-feedback">
                  <% resource.errors["addresses.uf"].each do |m| %>
                  <%= m %>
                  <br>
                  <% end %>
                </div>
                <% end %>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group col">
                <label for="city">Cidade</label>
                <%= addr_form.select :city, [], { include_blank: false }, { id: 'city', class: "form-control #{ 'is-invalid' if resource.errors['addresses.city'].any? }" } %>
                <% if resource.errors["addresses.city"].any? %>
                <div class="invalid-feedback">
                  <% resource.errors["addresses.city"].each do |m| %>
                  <%= m %>
                  <br>
                  <% end %>
                </div>
                <% end %>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group col">
                <label for="number">Rua</label>
                <%= addr_form.text_field :street, class: "form-control #{ 'is-invalid' if resource.errors['addresses.street'].any? }", id: 'street', required: 'true' %>
                <% if resource.errors["addresses.street"].any? %>
                <div class="invalid-feedback">
                  <% resource.errors["addresses.street"].each do |m| %>
                  <%= m %>
                  <br>
                  <% end %>
                </div>
                <% end %>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group col-lg-8 col-12">
                <label for="cep">Cep</label>
                <%= addr_form.text_field :cep, class: "form-control cep #{ 'is-invalid' if resource.errors['addresses.cep'].any? }", id: 'cep', required: 'true' %>
                <% if resource.errors["addresses.cep"].any? %>
                <div class="invalid-feedback">
                  <% resource.errors["addresses.cep"].each do |m| %>
                  <%= m %>
                  <br>
                  <% end %>
                </div>
                <% end %>
              </div>
              <div class="form-group col-12 col-lg-4">
                <label for="number">Número</label>
                <%= addr_form.number_field :number, min: 0, class: "form-control #{ 'is-invalid' if resource.errors['addresses.number'].any? }", id: 'number' %>
                <% if resource.errors["addresses.number"].any? %>
                <div class="invalid-feedback">
                  <% resource.errors["addresses.number"].each do |m| %>
                  <%= m %>
                  <br>
                  <% end %>
                </div>
                <% end %>
              </div>
            </div>
            <% end %>
          </div>

          <div class="form-row mb-3 mt-0 mx-0">
            <small class="">
              *Obrigatórios
            </small>
          </div>

          <div class="row m-0">
            <div class="col-6 pl-0">
              <button type="button" onclick="prevStep();" class="mt-0 step-prev btn btn-block btn-primary">
                <span class="nobreak">
                  <i class="ml-1 fas fa-chevron-left"></i>
                  Anterior
                </span>
              </button>
            </div>

            <div class="col-6 pr-0">
              <button type="button" onclick="nextStep();" class="mt-0 step-next visible btn btn-block btn-primary">
                <span class="nobreak">
                  Próxima
                  <i class="ml-1 fas fa-chevron-right"></i>
                </span>
              </button>

              <button type="submit" class="mt-0 step-submit btn btn-block btn-primary">
                <span class="nobreak">
                  Enviar
                  <i class="ml-1 fas fa-check"></i>
                </span>
              </button>
            </div>
          </div>
          <% end %>
        </div>

      </div>
    </div>
  </section>
  <script src="/assets/steps.js"></script>
  <script src="/assets/ibge.js"></script>
</div>